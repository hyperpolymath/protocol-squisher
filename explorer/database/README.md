# Explorer Database

Empirical compatibility database artifacts generated by the explorer crawler.

## Generated Files

- `compatibility-observations.ndjson`
  - One normalized observation per crawled schema record.
  - Includes format, repository, parse/corpus error state, entity count, and
    observed transport classes.
- `summary.json`
  - Aggregate counts for formats, transport classes, repositories, and error
    rates.
- `synthesis-hints.json`
  - Extracted pattern weights for synthesis suggestions (`WidenType`,
    `MakeOptional`, etc.).
  - Intended as input to `protocol-squisher optimize --synthesis-hints ...`.

## How to Generate

Run crawler:

```bash
cd explorer/crawler
mix crawler.run --max-pages 1
```

Print summary report:

```bash
mix crawler.db.report --database-path ../../target/explorer/database
```

Extract synthesis hints:

```bash
mix crawler.pattern.extract --database-path ../../target/explorer/database
```

Apply hints during optimization API:

```bash
# Rust (inside application code):
# EphapaxOptimizer::new(engine)
#   .with_empirical_hints_from_file("../../target/explorer/database/synthesis-hints.json")
#   .expect("valid hints")
```
